<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bikeseoul.bikeseoul_kw.dao.TicketDao">
    <select id="getExpiredTicketList" resultType="com.bikeseoul.bikeseoul_kw.container.Ticket">
        SELECT
            t.member_uid t.ticket_id, t.cost, t.ticket_type, t.hours, t.created_date, t.updated_date, t.detail_start_date, t.detail_create_date, t.detail_expire_date
        FROM
            ticket t
        LEFT JOIN
            ticket_detail_expired tde
        ON
            t.ticket_id = tde.ticket_id
        WHERE
            t.member_uid = #{member_uid}
    </select>

    <select id="getActivatedTicketList" resultType="com.bikeseoul.bikeseoul_kw.container.Ticket">
        SELECT
            t.member_uid, t.ticket_id, t.cost, t.ticket_type, t.hours, t.created_date, t.updated_date, t.detail_start_date, t.detail_create_date, t.activation
        FROM
            ticket t
        LEFT JOIN
            ticket_detail td
        ON
            t.ticket_id = td.ticket_id
        WHERE
            t.member_uid = #{member_uid}
        AND
            t.activation = 1
    </select>

</mapper>